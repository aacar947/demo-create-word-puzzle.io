(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function s(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(t){if(t.ep)return;t.ep=!0;const o=s(t);fetch(t.href,o)}})();function L(r=1){let e=0,s=r;return arguments.length>=2&&(e=arguments[0],s=arguments[1]),Math.floor(Math.random()*(s-e)+e)}function x(r=0,e=0,s=1/0){return Math.max(Math.min(r,s),e)}const b=3;function I({wordlist:r=[],width:e=11,height:s=11,minWordLength:n=b,listSize:t,margin:o=0,shareLetters:c=!0,allowReverseWords:i=!0,reverseWordRatio:l=.33}){const d=Math.max(b,n);s=Math.max(s,d),e=Math.max(e,d);const a=Math.max(b,e,s);n=x(n,b,a),o=x(o,0,a-n);const u=x(Math.max(e,s)-o,n,a);l=x(l*100,0,100)/100;const h=S(r,t,n,u,e*s),f=j(s,e);return C(f,h,r,{height:s,width:e,shareLetters:c,allowReverseWords:i,reverseWordRatio:l}),q(f),{grid:f,wordlist:h.filter(m=>m),margin:o,width:e,height:s,listSize:t,minWordLength:n,maxWordLength:u,allowReverseWords:i,reverseWordRatio:l,shareLetters:c,unplacedWords:r}}function S(r,e,s,n,t){const o=r.filter(l=>l.length<=n&&l.length>=s),c=[],i=Math.min(o.length,e)||o.length;if(!i)return c;for(let l=0;l<i;l++){const d=L(o.length),a=o[d];if(t-=a.length,t<=0)break;c.push(a),o.splice(d,1)}return c.map((l,d)=>({value:l,found:!1}))}function j(r,e){return new Array(r).fill(0).map(()=>new Array(e).fill(0))}function C(r,e,s,{height:n,width:t,shareLetters:o,allowReverseWords:c,reverseWordRatio:i}){const l=[{x:0,y:1,check:(a,u,h)=>h<=t-a},{x:1,y:0,check:(a,u,h)=>u<=n-a},{x:-1,y:1,check:(a,u,h)=>u>=a&&h<=t-a},{x:1,y:1,check:(a,u,h)=>u<=n-a&&h<=t-a}];e.sort((a,u)=>u.value.length-a.value.length);const d={};for(let a=0;a<e.length;a++){const u=e[a].value,h=c&&Math.random()<i;let f,m,g=!0;const v=P(n,t,u.length,d);do{if(v.length<=0){e[a]=0,g=!1;break}const w=L(v.length);f=v[w];const W=z(f,n,t);for(let p=0;p<l.length;p++){const O=(p+W)%l.length;if(m=l[O],g=H(r,u,m,f,o,h),!!g)break}g||v.splice(w,1)}while(!g);if(g){A(r,d,{start:f,word:u.toUpperCase(),dir:m,reverse:h});const w=[y(f.x,m.x,u.length,h),y(f.y,m.y,u.length,h)],W=[y(f.x,m.x,u.length,!h),y(f.y,m.y,u.length,!h)];e[a].start=w,e[a].end=W,e[a].reverse=h;const p=s.indexOf(u);s.splice(p,1)}}}function z(r,e,s){return r.x===0||r.x===e?0:r.y===0||r.y===s?1:L(2,4)}function y(r,e,s,n){return n?r+(s-1)*e:r}function B(r,e,s,n){const t=y(r.x,e.x,s,n),o=y(r.y,e.y,s,n);return{x:t,y:o,factor:n?-1:1}}function A(r,e,{start:s,word:n,dir:t,reverse:o}){let{x:c,y:i,factor:l}=B(s,t,n.length,o);for(const d of n)r[c][i]=d,e[c+","+i]=1,c+=t.x*l,i+=t.y*l}function H(r,e,s,n,t,o){let{x:c,y:i,factor:l}=B(n,s,e.length,o),d=!0,a=!1;if(!s.check(e.length,n.x,n.y))return!1;for(const u of e){const h=u.toUpperCase()===(""+r[c][i]).toUpperCase();if(d=r[c][i]===0||t&&!a&&h,a=h,!d)break;c+=s.x*l,i+=s.y*l}return d}function P(r,e,s,n){const t=[],o=r-s,c=e-s;for(let i=0;i<r*e;i++){const l=Math.floor(i/e),d=Math.floor(i%e);l>o&&d>c||n[l+","+d]||t.push({x:l,y:d})}return t}function q(r){r.forEach((e,s)=>{e.forEach((n,t)=>{n||(r[s][t]=String.fromCharCode(L(65,91)))})})}const M=I({wordlist:["apple","banana","cherry","tomato","blueberry","lime","kiwi","pomegranate","starfruit"],width:11,height:11});console.log(M);R(M);function R(r){const e={};r.wordlist.forEach(n=>{const t=n.start,o=n.end,c=n.value.length;let i=o[0]-t[0],l=o[1]-t[1];i=i&&i/Math.abs(i),l=l&&l/Math.abs(l);for(let d=0;d<c;d++)e[[t[0]+d*i,t[1]+d*l].join(",")]=1});const s=document.querySelector("#grid");s.innerHTML=`
    <div class="flex-column flex-wrap align-center">
      <div style="padding: 1rem;">
        <table>
          <tbody>
        ${r.grid.map((n,t)=>`
          <tr>
          ${n.map((o,c)=>e[[t,c].join(",")]?`<td class="word-point">${o}</td>`:`<td>${o}</td>`).join("")}
            </tr>
            `).join("")}
          </tbody>
        </table>
      </div>
      <div class="flex-row justify-center flex-wrap" style="max-width: 100%;">
      ${r.wordlist.map(n=>`<p style="margin: 0">${n.value.toUpperCase()}</p>`).join("")}
      </div>
    </div>
  `}const N=document.getElementById("wordlist"),U=document.getElementById("width"),_=document.getElementById("height"),T=document.getElementById("listSize"),V=document.getElementById("minWordLength"),D=document.getElementById("margin"),F=document.getElementById("reverseWordRatio"),G=document.getElementById("allowReverseWords"),J=document.getElementById("shareLetters"),K=document.getElementById("showWords"),Q=document.getElementById("generate");Q.addEventListener("click",()=>{const r=I({wordlist:N.value.split(","),width:U.value,height:_.value,listSize:T.value,minWordLength:V.value,margin:D.value,allowReverseWords:G.checked,reverseWordRatio:F.value,shareLetters:J.checked});R(r),k(),E(r,document.getElementById("object-viewer").querySelector("ul"))});K.addEventListener("change",r=>{r.target.checked==!0?document.getElementById("grid").classList.add("show-words"):document.getElementById("grid").classList.remove("show-words")});function E(r,e,s=!0){if(s){const t=$("puzzle",r,e);E(r,t,!1);return}(r&&Object.keys(r)||[]).forEach(t=>{const o=r[t];if(typeof o==="object"){const i=$(t,o,e);E(o,i,!1)}else{const i=document.createElement("li"),l=typeof o,d=l==="string"?`<span class="string-value">"${o}"</span>`:l==="number"?`<span class="number-value">${o}</span>`:l==="boolean"?`<span class="boolean-value">${o}</span>`:`<span>${o}</span>`;i.innerHTML=`<span class="key">${t}: </span>${d}`,e.appendChild(i)}})}let X=0;function $(r,e,s){const n=`__${r}-${++X}`,t=document.createElement("ul");return t.classList.add("nested"),t.innerHTML=`<input class="nested-checkbox" id="${n}" type="checkbox" /><label class="key" for="${n}">${r&&r+":"} </label><label for="${n}">${Array.isArray(e)&&"("+e.length+")"||""} ${JSON.stringify(e)}</label>`,s.appendChild(t),t}function k(){document.getElementById("object-viewer").querySelector("ul").innerHTML=""}k();E(M,document.getElementById("object-viewer").querySelector("ul"));
