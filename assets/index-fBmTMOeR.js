(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function o(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(e){if(e.ep)return;e.ep=!0;const s=o(e);fetch(e.href,s)}})();function E(r=1){let t=0,o=r;return arguments.length>=2&&(t=arguments[0],o=arguments[1]),Math.floor(Math.random()*(o-t)+t)}function x(r=0,t=0,o=1/0){return Math.max(Math.min(r,o),t)}const b=3;function $({wordlist:r=[],width:t=11,height:o=11,minWordLength:n=b,listSize:e,margin:s=0,shareLetters:a=!0,allowReverseWords:l=!0,reverseWordRatio:i=.33}){const d=Math.max(b,n);o=Math.max(o,d),t=Math.max(t,d);const c=Math.max(b,t,o);n=x(n,b,c),s=x(s,0,c-n);const u=x(Math.max(t,o)-s,n,c);i=x(i*100,0,100)/100;const h=S(r,e,n,u,t*o),f=j(o,t);return O(f,h,r,{height:o,width:t,shareLetters:a,allowReverseWords:l,reverseWordRatio:i}),P(f),{grid:f,wordlist:h.filter(g=>g),margin:s,width:t,height:o,listSize:e,minWordLength:n,maxWordLength:u,allowReverseWords:l,reverseWordRatio:i,shareLetters:a,unplacedWords:r}}function S(r,t,o,n,e){const s=r.filter(i=>i.length<=n&&i.length>=o),a=[],l=Math.min(s.length,t)||s.length;if(!l)return a;for(let i=0;i<l;i++){const d=E(s.length),c=s[d];if(e-=c.length,e<=0)break;a.push(c),s.splice(d,1)}return a.map((i,d)=>({value:i,found:!1}))}function j(r,t){return new Array(r).fill(0).map(()=>new Array(t).fill(0))}function O(r,t,o,{height:n,width:e,shareLetters:s,allowReverseWords:a,reverseWordRatio:l}){const i=[{x:0,y:1,check:(c,u,h)=>h<=e-c},{x:1,y:0,check:(c,u,h)=>u<=n-c},{x:-1,y:1,check:(c,u,h)=>u>=c&&h<=e-c},{x:1,y:1,check:(c,u,h)=>u<=n-c&&h<=e-c}];t.sort((c,u)=>u.value.length-c.value.length);const d={};for(let c=0;c<t.length;c++){const u=t[c].value,h=a&&Math.random()<l;let f,g,m=!0;const v=H(n,e,u.length,d);do{if(v.length<=0){t[c]=0,m=!1;break}const w=E(v.length);f=v[w];const L=C(f,n,e);for(let p=0;p<i.length;p++){const R=(p+L)%i.length;if(g=i[R],m=z(r,u,g,f,s,h),!!m)break}m||v.splice(w,1)}while(!m);if(m){A(r,d,{start:f,word:u.toUpperCase(),dir:g,reverse:h});const w=[y(f.x,g.x,u.length,h),y(f.y,g.y,u.length,h)],L=[y(f.x,g.x,u.length,!h),y(f.y,g.y,u.length,!h)];t[c].start=w,t[c].end=L,t[c].reverse=h;const p=o.indexOf(u);o.splice(p,1)}}}function C(r,t,o){return r.x===0||r.x===t?0:r.y===0||r.y===o?1:E(2,4)}function y(r,t,o,n){return n?r+(o-1)*t:r}function I(r,t,o,n){const e=y(r.x,t.x,o,n),s=y(r.y,t.y,o,n);return{x:e,y:s,factor:n?-1:1}}function A(r,t,{start:o,word:n,dir:e,reverse:s}){let{x:a,y:l,factor:i}=I(o,e,n.length,s);for(const d of n)r[a][l]=d,t[a+","+l]=1,a+=e.x*i,l+=e.y*i}function z(r,t,o,n,e,s){let{x:a,y:l,factor:i}=I(n,o,t.length,s),d=!0,c=!1;if(!o.check(t.length,n.x,n.y))return!1;for(const u of t){const h=u.toUpperCase()===(""+r[a][l]).toUpperCase();if(d=r[a][l]===0||e&&!c&&h,c=h,!d)break;a+=o.x*i,l+=o.y*i}return d}function H(r,t,o,n){const e=[],s=r-o,a=t-o;for(let l=0;l<r*t;l++){const i=Math.floor(l/t),d=Math.floor(l%r);i>s&&d>a||n[i+","+d]||e.push({x:i,y:d})}return e}function P(r){r.forEach((t,o)=>{t.forEach((n,e)=>{n||(r[o][e]=String.fromCharCode(E(65,91)))})})}const W=$({wordlist:["apple","banana","cherry","tomato","blueberry","lime","kiwi","pomegranate","starfruit"],width:11,height:11});console.log(W);B(W);function B(r){const t={};r.wordlist.forEach(n=>{const e=n.start,s=n.end,a=n.value.length;let l=s[0]-e[0],i=s[1]-e[1];l=l&&l/Math.abs(l),i=i&&i/Math.abs(i);for(let d=0;d<a;d++)t[[e[0]+d*l,e[1]+d*i].join(",")]=1});const o=document.querySelector("#grid");o.innerHTML=`
    <div class="flex-column flex-wrap align-center">
      <div style="padding: 1rem;">
        <table>
          <tbody>
        ${r.grid.map((n,e)=>`
          <tr>
          ${n.map((s,a)=>t[[e,a].join(",")]?`<td class="word-point">${s}</td>`:`<td>${s}</td>`).join("")}
            </tr>
            `).join("")}
          </tbody>
        </table>
      </div>
      <div class="flex-row justify-center flex-wrap" style="max-width: 100%;">
      ${r.wordlist.map(n=>`<p style="margin: 0">${n.value.toUpperCase()}</p>`).join("")}
      </div>
    </div>
  `}const q=document.getElementById("wordlist"),N=document.getElementById("width"),U=document.getElementById("height"),T=document.getElementById("listSize"),_=document.getElementById("minWordLength"),D=document.getElementById("margin"),F=document.getElementById("reverseWordRatio"),G=document.getElementById("allowReverseWords"),J=document.getElementById("shareLetters"),K=document.getElementById("showWords"),V=document.getElementById("generate");V.addEventListener("click",()=>{const r=$({wordlist:q.value.split(","),width:N.value,height:U.value,listSize:T.value,minWordLength:_.value,margin:D.value,allowReverseWords:G.checked,reverseWordRatio:F.value,shareLetters:J.checked});B(r),k(),M(r,document.getElementById("object-viewer").querySelector("ul"))});K.addEventListener("change",r=>{r.target.checked==!0?document.getElementById("grid").classList.add("show-words"):document.getElementById("grid").classList.remove("show-words")});let Q=0;function M(r,t){(r&&Object.keys(r)||[]).forEach(n=>{const e=r[n];if(typeof e==="object"){const a=`__${n}-${++Q}`,l=document.createElement("ul");l.classList.add("nested"),l.innerHTML=`<input class="nested-checkbox" id="${a}" type="checkbox" /><label class="key" for="${a}">${n}: </label><label for="${a}">(${Array.isArray(e)&&e.length.toString()||""}) ${JSON.stringify(e)}</label>`,t.appendChild(l),M(e,l)}else{const a=document.createElement("li"),l=typeof e,i=l==="string"?`<span class="string-value">"${e}"</span>`:l==="number"?`<span class="number-value">${e}</span>`:l==="boolean"?`<span class="boolean-value">${e}</span>`:`<span>${e}</span>`;a.innerHTML=`<span class="key">${n}: </span>${i}`,t.appendChild(a)}})}function k(){document.getElementById("object-viewer").querySelector("ul").innerHTML=""}k();M(W,document.getElementById("object-viewer").querySelector("ul"));
