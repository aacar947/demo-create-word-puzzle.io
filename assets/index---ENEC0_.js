(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function B(t=1){let e=0,n=t;return arguments.length>=2&&(e=arguments[0],n=arguments[1]),Math.floor(Math.random()*(n-e)+e)}function $(t=0,e=0,n=1/0){return Math.max(Math.min(t,n),e)}const I=3;function k({wordlist:t=[],width:e=11,height:n=11,minWordLength:o=I,listSize:r,margin:s=0,shareLetters:i=!0,allowReverseWords:u=!0,reverseWordRatio:a=.33}){const h=Math.max(I,o);n=Math.max(n,h),e=Math.max(e,h);const l=Math.max(I,e,n);o=$(o,I,l),s=$(s,0,l-o);const c=$(Math.max(e,n)-s,o,l);a=$(a*100,0,100)/100;const f=S(t,r,o,c,e*n),y=O(n,e);return z(y,f,t,{height:n,width:e,shareLetters:i,allowReverseWords:u,reverseWordRatio:a}),H(y),{grid:y,wordlist:f.filter(v=>v),margin:s,width:e,height:n,listSize:r,minWordLength:o,maxWordLength:c,allowReverseWords:u,reverseWordRatio:a,shareLetters:i,unplacedWords:t}}function S(t,e,n,o,r){const s=t.filter(a=>a.length<=o&&a.length>=n),i=[],u=Math.min(s.length,e)||s.length;if(!u)return i;for(let a=0;a<u;a++){const h=B(s.length),l=s[h];if(r-=l.length,r<=0)break;i.push(l),s.splice(h,1)}return i.map((a,h)=>({value:a,found:!1}))}function O(t,e){return new Array(t).fill(0).map(()=>new Array(e).fill(0))}function z(t,e,n,{height:o,width:r,shareLetters:s,allowReverseWords:i,reverseWordRatio:u}){const a=[{x:0,y:1,check:(l,c,f)=>f<=r-l},{x:1,y:0,check:(l,c,f)=>c<=o-l},{x:-1,y:1,check:(l,c,f)=>c>=l&&f<=r-l},{x:1,y:1,check:(l,c,f)=>c<=o-l&&f<=r-l}];e.sort((l,c)=>c.value.length-l.value.length);const h={};for(let l=0;l<e.length;l++){const c=e[l].value,f=i&&Math.random()<u;let y,v,g=!0;const w=P(o,r,c.length,h);do{if(w.length<=0){e[l]=0,g=!1;break}const E=B(w.length);y=w[E];const m=C(y,o,r);for(let d=0;d<a.length;d++){const b=(d+m)%a.length;if(v=a[b],g=A(t,c,v,y,s,f),!!g)break}g||w.splice(E,1)}while(!g);if(g){j(t,h,{start:y,word:c.toUpperCase(),dir:v,reverse:f});const E=[W(y.x,v.x,c.length,f),W(y.y,v.y,c.length,f)],m=[W(y.x,v.x,c.length,!f),W(y.y,v.y,c.length,!f)];e[l].start=E,e[l].end=m,e[l].reverse=f;const d=n.indexOf(c);n.splice(d,1)}}}function C(t,e,n){return t.x===0||t.x===e?0:t.y===0||t.y===n?1:B(2,4)}function W(t,e,n,o){return o?t+(n-1)*e:t}function R(t,e,n,o){const r=W(t.x,e.x,n,o),s=W(t.y,e.y,n,o);return{x:r,y:s,factor:o?-1:1}}function j(t,e,{start:n,word:o,dir:r,reverse:s}){let{x:i,y:u,factor:a}=R(n,r,o.length,s);for(const h of o)t[i][u]=h,e[i+","+u]=1,i+=r.x*a,u+=r.y*a}function A(t,e,n,o,r,s){let{x:i,y:u,factor:a}=R(o,n,e.length,s),h=!0,l=!1;if(!n.check(e.length,o.x,o.y))return!1;for(const c of e){const f=c.toUpperCase()===(""+t[i][u]).toUpperCase();if(h=t[i][u]===0||r&&!l&&f,l=f,!h)break;i+=n.x*a,u+=n.y*a}return h}function P(t,e,n,o){const r=[],s=t-n,i=e-n;for(let u=0;u<t*e;u++){const a=Math.floor(u/e),h=Math.floor(u%t);a>s&&h>i||o[a+","+h]||r.push({x:a,y:h})}return r}function H(t){t.forEach((e,n)=>{e.forEach((o,r)=>{o||(t[n][r]=String.fromCharCode(B(65,91)))})})}(function(){const t=k({wordlist:["apple","banana","cherry","tomato","blueberry","lime","kiwi","pomegranate","starfruit"],width:11,height:11});console.log(t),e(t);function e(g){const w={};g.wordlist.forEach(m=>{const d=m.start,b=m.end,x=m.value.length;let p=b[0]-d[0],L=b[1]-d[1];p=p&&p/Math.abs(p),L=L&&L/Math.abs(L);for(let M=0;M<x;M++)w[[d[0]+M*p,d[1]+M*L].join(",")]=1});const E=document.querySelector("#grid");E.innerHTML=`
    <div class="flex-column flex-wrap align-center">
      <div style="padding: 1rem;">
        <table>
          <tbody>
        ${g.grid.map((m,d)=>`
          <tr>
          ${m.map((b,x)=>w[[d,x].join(",")]?`<td class="word-point">${b}</td>`:`<td>${b}</td>`).join("")}
            </tr>
            `).join("")}
          </tbody>
        </table>
      </div>
      <div class="flex-row justify-center flex-wrap" style="max-width: 100%;">
      ${g.wordlist.map(m=>`<p style="margin: 0">${m.value.toUpperCase()}</p>`).join("")}
      </div>
    </div>
  `}const n=document.getElementById("wordlist"),o=document.getElementById("width"),r=document.getElementById("height"),s=document.getElementById("listSize"),i=document.getElementById("minWordLength"),u=document.getElementById("margin"),a=document.getElementById("reverseWordRatio"),h=document.getElementById("allowReverseWords"),l=document.getElementById("shareLetters"),c=document.getElementById("showWords");document.getElementById("generate").addEventListener("click",()=>{const g=k({wordlist:n.value.split(","),width:o.value,height:r.value,listSize:s.value,minWordLength:i.value,margin:u.value,allowReverseWords:h.checked,reverseWordRatio:a.value,shareLetters:l.checked});console.log(g),e(g),v(g,document.getElementById("puzzle").querySelector("ul"))}),c.addEventListener("change",g=>{g.target.checked==!0?document.getElementById("grid").classList.add("show-words"):document.getElementById("grid").classList.remove("show-words")});let y=0;function v(g,w){(g&&Object.keys(g)||[]).forEach(m=>{const d=g[m];if(typeof d==="object"){const x=`__${m}-${++y}`,p=document.createElement("ul");p.classList.add("nested"),p.innerHTML=`<input class="nested-checkbox" id="${x}" type="checkbox" /><label class="key" for="${x}">${m}: </label><label for="${x}">(${Array.isArray(d)&&d.length.toString()||""}) ${JSON.stringify(d)}</label>`,w.appendChild(p),v(d,p)}else{const x=document.createElement("li"),p=typeof d,L=p==="string"?`<span class="string-value">"${d}"</span>`:p==="number"?`<span class="number-value">${d}</span>`:p==="boolean"?`<span class="boolean-value">${d}</span>`:`<span>${d}</span>`;x.innerHTML=`<span class="key">${m}: </span>${L}`,w.appendChild(x)}})}v(t,document.getElementById("puzzle").querySelector("ul"))})();
